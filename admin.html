<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>صفحة الأدمن</title>
</head>
<body>
  <h1>تحكم في حالة الإعلان</h1>
<button id="toggleAdBtn">تحميل...</button>

<script>
  const toggleBtn = document.getElementById('toggleAdBtn');

  // تجيب الحالة من السيرفر وتعرضها في الزر
  async function loadStatus() {
    const res = await fetch('/api/ad-status');
    const data = await res.json();
    toggleBtn.textContent = data.active ? 'تعطيل الإعلان' : 'تفعيل الإعلان';
  }

  toggleBtn.addEventListener('click', async () => {
    const res = await fetch('/api/ad-status');
    const data = await res.json();
    const newStatus = !data.active;

    await fetch('/api/ad-status', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ active: newStatus })
    });

    toggleBtn.textContent = newStatus ? 'تعطيل الإعلان' : 'تفعيل الإعلان';
  });

  loadStatus();
</script>
</body>
</html>
